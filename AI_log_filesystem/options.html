<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ChatGPT Auto Save 設定</title>
  <style>
    :root { --bg:#fff; --fg:#111; --sub:#666; --border:rgba(0,0,0,.12); }
    @media (prefers-color-scheme: dark) {
      :root { --bg:#0b0f16; --fg:#e5e7eb; --sub:#9aa0a6; --border:rgba(255,255,255,.14); }
    }
    body { margin:0; background:var(--bg); color:var(--fg); font:14px/1.6 system-ui, -apple-system, Segoe UI, Roboto, "Noto Sans JP", sans-serif; }
    main { max-width: 720px; margin: 24px auto; padding: 0 16px; }
    h1 { font-size: 18px; margin: 0 0 12px; }
    section { border:1px solid var(--border); border-radius:12px; padding:16px; margin-bottom:16px; }
    .row { display:flex; align-items:center; gap:8px; flex-wrap: wrap; margin: 6px 0; }
    select, button, input[type="checkbox"] { border:1px solid var(--border); border-radius:10px; padding:6px 8px; background:transparent; color:var(--fg); }
    button:hover { background: rgba(127,127,127,.08); cursor: pointer; }
    .note { color: var(--sub); font-size: 12px; }
    .ok { color: #089; font-weight: 600; }
  </style>
</head>
<body>
  <main>
    <h1>ChatGPT Auto Save 設定</h1>

    <section>
      <div class="row">
        <label>出力形式</label>
        <select id="fmt">
          <option value="html">HTML</option>
          <option value="md">Markdown</option>
          <option value="json">JSON</option>
        </select>
      </div>
      <div class="row">
        <label><input type="checkbox" id="autoconn"> 起動時に自動接続（デフォルトがある場合）</label>
      </div>
      <div class="note">形式と自動接続の設定は保存され、ChatGPTページで反映されます。</div>
    </section>

    <section>
      <div class="row">
        <button id="btn-open-chat">ChatGPTを開く</button>
        <button id="btn-pick-default">この形式のデフォルト保存先を設定</button>
        <button id="btn-clear-default">この形式のデフォルト解除</button>
      </div>
      <div class="note">
        デフォルト保存先はブラウザの仕様上、<b>ChatGPTのページ上で一度だけ</b>ユーザー操作により設定（権限付与）する必要があります。<br>
        「この形式のデフォルト保存先を設定」を押すとタブを開き、ページ側に小さなパネルが表示されます。そこで「保存先を選ぶ」をクリックしてください。
      </div>
      <div id="status" class="note"></div>
    </section>
  </main>
  <script src="options.js"></script>
</body>
</html>
